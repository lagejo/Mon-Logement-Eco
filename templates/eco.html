{% extends "base.html" %}

{% block title %}Eco{% endblock %}

{% block content %}
<h1>Economies réalisées</h1>


<div class="form-group">
    <label for="logementSelect">Sélectionner un logement:</label>
    <select class="form-control" id="logementSelect" name="logementSelect" onchange="loadFactureTypes(this.value)">
        <option value="">Sélectionner un logement</option>
        {% for logement in logements %}
            <option value="{{ logement.id_loge }}">{{ logement.adresse }}</option>
        {% endfor %}
    </select>
</div>

<div id="emptyFactureMsg" style="display:none; color:red;"></div>

<div class="form-group" id="factureTypeContainer" style="display:none;">
    <label for="factureTypeSelect">Sélectionner un type de facture:</label>
    <select class="form-control" id="factureTypeSelect" name="factureTypeSelect" onchange="loadGraph(this.value)">
        <option value="">Sélectionner un type de facture</option>
        <!-- Les options seront ajoutées dynamiquement par JavaScript -->
    </select>
</div>

<div id="graphContainer" style="display:none; justify-content: space-between;">
    <div style="flex: 1; margin-right: 10px;">
        <h2>Graphique de l'évolution du montant</h2>
        <canvas id="graphMontant" style="width: 100%; height: 400px;"></canvas>
        <p id="comparisonMsg" style="color:red; display:none;"></p>
    </div>
    <div style="flex: 1; margin-left: 10px;">
        <h2 id="barChartTitle" style="display:none;"></h2>
        <canvas id="barChart" style="width: 100%; height: 400px;"></canvas>
    </div>
</div>
<a href="/consommation" class="btn btn-success" style="margin-top: 20px;">Voir la consommation globale de vos logements</a>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/static/js/factures.js"></script>
<script src="https://cdn.jsdelivr.net/npm/luxon@3.3.0/build/global/luxon.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.0"></script>


{% endblock %}